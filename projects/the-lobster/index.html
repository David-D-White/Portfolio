<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=author content="map[]"><title>The Lobster PCB Mill</title><link rel="shortcut icon" href=https://portfolio.ddwhite.space><link href=https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.no-icons.min.css rel=stylesheet><script defer src=https://use.fontawesome.com/releases/v5.0.11/js/all.js integrity=sha384-ImVoB8Er8knetgQakxuBS4G3RSkyD8IZVVQCAnmRJrDwqJFYUE4YOv+DbIofcO9C crossorigin=anonymous></script>
<link rel=stylesheet href="https://fonts.googleapis.com/css?family=Alice|Open+Sans:400,300,700"><link rel=stylesheet href=https://portfolio.ddwhite.space/css/styles.min.64a6643395c6bf1ec6fff31d6429046b3ad467e58a279ff252dc019edd80a87051cf90b7fe2d589277def72d84602dcbc7115e2e17a94db3a8838336986a0ae3.css integrity="sha512-ZKZkM5XGvx7G//MdZCkEazrUZ+WKJ5/yUtwBnt2AqHBRz5C3/i1Yknfe9y2EYC3LxxFeLhepTbOog4M2mGoK4w=="></head><body class=home><header id=header><div id=head class=parallax data-parallax-speed=2 style=background-image:url(https://portfolio.ddwhite.space/image/banner2-cropped.jpg)><h1 id=logo class=text-center><img class=img-circle src=https://portfolio.ddwhite.space/image/profile.jpg alt>
<span class=title>David White</span>
<span class=tagline>Mechatronics Engineering Student | 4th Year<br><a href=mailto:david.daniel.white@gmail.com>david.daniel.white@gmail.com</a></span></h1></div><nav class="navbar navbar-default navbar-sticky"><div class=container-fluid><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse data-target=#bs-example-navbar-collapse-1 aria-expanded=true>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span></button></div><div class="navbar-collapse collapse" id=bs-example-navbar-collapse-1><ul class="nav navbar-nav"><li><a href=/>home</a></li><li><a href=/projects>all projects</a></li></ul></div></div></nav></header><main id=main><div class=container><div class="row topspace"><div class="col-sm-8 col-sm-offset-2"><article class=post><header class=entry-header><div class=entry-meta><span class=posted-on><time class="entry-date published" datetime="March 38, 242412">March 24, 2023</time></span></div><h1 class=entry-title><a href=https://portfolio.ddwhite.space/projects/the-lobster/ rel=bookmark>The Lobster PCB Mill</a></h1></header><div class=entry-content><h1 id=project-in-action>Project in Action</h1><center><video width=100% controls muted autoplay loop>
<source src=/video/FYDP.mp4 type=video/mp4></video></center><h1 id=about-the-project>About the Project</h1><h3 id=machine-capabilities>Machine Capabilities</h3><center><link href=https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css rel=stylesheet><script src=https://code.jquery.com/jquery-3.2.1.slim.min.js crossorigin=anonymous></script><style>#slide-window-c5af465fabac9a37b585ebbe2c562c70{position:relative;width:48em;height:27em;overflow:hidden;top:0;left:0}#slides-list-c5af465fabac9a37b585ebbe2c562c70{width:48em;height:27em;position:absolute;margin:0;padding:0;-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0);transition:all .66s ease;-webkit-transition:all .66s ease}.slide{list-style:none;position:relative;float:left;margin:0;padding:0;width:48em;height:27em;background:#ccc;text-align:center;line-height:100%;background-size:cover;background-position:50%;color:#fff;-webkit-transform:translate3d(0,0,0);-webkit-transform-style:preserve-3d}.nav{position:relative;z-index:9;top:45%;cursor:pointer;color:#fff;opacity:.7;transition:all .66s ease;-webkit-transition:all .66s ease}.nav:hover{opacity:1}#left-c5af465fabac9a37b585ebbe2c562c70{left:3%;float:left}#right-c5af465fabac9a37b585ebbe2c562c70{right:3%;float:right}</style><div id=slide-window-c5af465fabac9a37b585ebbe2c562c70><ol id=slides-list-c5af465fabac9a37b585ebbe2c562c70><li class=slide style=background-image:url(https://portfolio.ddwhite.space/image/lobster_mill/capabilities/Lobster%20Claw.jpg)><h1 style=color:#bbb;background-color:#333;opacity:.7;font-weight:700>0.1mm trace width</h1></li><li class=slide style=background-image:url(https://portfolio.ddwhite.space/image/lobster_mill/capabilities/Passives.jpg)><h1 style=color:#bbb;background-color:#333;opacity:.7;font-weight:700>Passives: 1210 to 0201</h1></li><li class=slide style=background-image:url(https://portfolio.ddwhite.space/image/lobster_mill/capabilities/SOP,%20MSOP.jpg)><h1 style=color:#bbb;background-color:#333;opacity:.7;font-weight:700>SOP and MSOP footprints</h1></li><li class=slide style=background-image:url(https://portfolio.ddwhite.space/image/lobster_mill/capabilities/SOT.jpg)><h1 style=color:#bbb;background-color:#333;opacity:.7;font-weight:700>SOT footprints</h1></li></ol><span class="nav fa fa-chevron-left fa-3x" id=left-c5af465fabac9a37b585ebbe2c562c70></span>
<span class="nav fa fa-chevron-right fa-3x" id=right-c5af465fabac9a37b585ebbe2c562c70></span></div><script>sliderJQuery=jQuery.noConflict(),sliderJQuery(function(e){e.global=new Object,e.global.total=0,e(document).ready(function(){var n=e("#slide-window-c5af465fabac9a37b585ebbe2c562c70").width(),s=e("#slides-list-c5af465fabac9a37b585ebbe2c562c70 li").length,i=s*n;e.global.item=0,e.global.total=s,e(".slide").css("width",n+"px"),e("#slides-list-c5af465fabac9a37b585ebbe2c562c70").css("width",i+"px"),e("#left-c5af465fabac9a37b585ebbe2c562c70").click(function(){o(),t("back")}),e("#right-c5af465fabac9a37b585ebbe2c562c70").click(function(){o(),t("forward")})});function t(t){if(t=="back")var s=e.global.item-1;t=="forward"&&(s=e.global.item+1),s==-1?n(e.global.total-1):n(s==e.global.total?0:s)}function n(t){var n=e("#slide-window-c5af465fabac9a37b585ebbe2c562c70").width(),s=n*t;e("#slides-list-c5af465fabac9a37b585ebbe2c562c70").css("transform","translate3d(-"+s+"px,0px,0px)"),e.global.item=t}var s,i=parseInt("5000",10);function o(){i&&(s&&clearInterval(s),s=setInterval(function(){t("forward")},i))}o()})</script></center><p><a href=https://thelobsterteam.github.io>The Lobster PCB Mill</a> is a fully automated PCB prototyping solution which aims to do for PCB design what 3D printing did for mechanical design. This project was designed and developed as my capstone project for the Mechatronics Engineering program at University of Waterloo. The machine is capable of producing 2-layer prototype PCBs with 0.1mm trace spacing, 0.5mm component size (0402), and 0.5mm vias without any user interaction. The project code is fully <a href=https://github.com/orgs/TheLobsterTeam/repositories>open source</a></p><h3 id=mechanical>Mechanical</h3><center><link href=https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css rel=stylesheet><script src=https://code.jquery.com/jquery-3.2.1.slim.min.js crossorigin=anonymous></script><style>#slide-window-d6f0362a56e89131874441f5f3285aaa{position:relative;width:48em;height:27em;overflow:hidden;top:0;left:0}#slides-list-d6f0362a56e89131874441f5f3285aaa{width:48em;height:27em;position:absolute;margin:0;padding:0;-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0);transition:all .66s ease;-webkit-transition:all .66s ease}.slide{list-style:none;position:relative;float:left;margin:0;padding:0;width:48em;height:27em;background:#ccc;text-align:center;line-height:100%;background-size:cover;background-position:50%;color:#fff;-webkit-transform:translate3d(0,0,0);-webkit-transform-style:preserve-3d}.nav{position:relative;z-index:9;top:45%;cursor:pointer;color:#fff;opacity:.7;transition:all .66s ease;-webkit-transition:all .66s ease}.nav:hover{opacity:1}#left-d6f0362a56e89131874441f5f3285aaa{left:3%;float:left}#right-d6f0362a56e89131874441f5f3285aaa{right:3%;float:right}</style><div id=slide-window-d6f0362a56e89131874441f5f3285aaa><ol id=slides-list-d6f0362a56e89131874441f5f3285aaa><li class=slide style=background-image:url(https://portfolio.ddwhite.space/image/lobster_mill/mechanical/1%20heads_installed.jpg)><h1 style=color:#bbb;background-color:#333;opacity:.7;font-weight:700>3 Independent Toolheads</h1></li><li class=slide style=background-image:url(https://portfolio.ddwhite.space/image/lobster_mill/mechanical/2%20leadscrews.jpg)><h1 style=color:#bbb;background-color:#333;opacity:.7;font-weight:700>Automatic Flipping Mechanism</h1></li><li class=slide style=background-image:url(https://portfolio.ddwhite.space/image/lobster_mill/mechanical/3%20new_cutter.jpg)><h1 style=color:#bbb;background-color:#333;opacity:.7;font-weight:700>Wire Feeding Head</h1></li><li class=slide style=background-image:url(https://portfolio.ddwhite.space/image/lobster_mill/mechanical/4%20dust.jpg)><h1 style=color:#bbb;background-color:#333;opacity:.7;font-weight:700>Vaccuum for Dust Collection</h1></li></ol><span class="nav fa fa-chevron-left fa-3x" id=left-d6f0362a56e89131874441f5f3285aaa></span>
<span class="nav fa fa-chevron-right fa-3x" id=right-d6f0362a56e89131874441f5f3285aaa></span></div><script>sliderJQuery=jQuery.noConflict(),sliderJQuery(function(e){e.global=new Object,e.global.total=0,e(document).ready(function(){var n=e("#slide-window-d6f0362a56e89131874441f5f3285aaa").width(),s=e("#slides-list-d6f0362a56e89131874441f5f3285aaa li").length,i=s*n;e.global.item=0,e.global.total=s,e(".slide").css("width",n+"px"),e("#slides-list-d6f0362a56e89131874441f5f3285aaa").css("width",i+"px"),e("#left-d6f0362a56e89131874441f5f3285aaa").click(function(){o(),t("back")}),e("#right-d6f0362a56e89131874441f5f3285aaa").click(function(){o(),t("forward")})});function t(t){if(t=="back")var s=e.global.item-1;t=="forward"&&(s=e.global.item+1),s==-1?n(e.global.total-1):n(s==e.global.total?0:s)}function n(t){var n=e("#slide-window-d6f0362a56e89131874441f5f3285aaa").width(),s=n*t;e("#slides-list-d6f0362a56e89131874441f5f3285aaa").css("transform","translate3d(-"+s+"px,0px,0px)"),e.global.item=t}var s,i=parseInt("5000",10);function o(){i&&(s&&clearInterval(s),s=setInterval(function(){t("forward")},i))}o()})</script></center><p>The mechanical design of the mill is fully custom, featuring 3 individually controlled toolheads for milling/drilling, a PCB flipping mechanism, a mechanical press, and a wire extrusion head. The XY motion carriage uses linear rails and 2mm pitch lead screws with anti-backlash nuts for precise motion. Other components such as the wire feeding head, press, and milling heads use lead screws with a higher pitch and linear rods to save cost where precise motion is less important. BLDC motors and drone ESCs are used to power the drilling/milling heads, and a single servo motor actuates the wire cutters used on the wire feeding head.</p><p>The machine produces PCBs by first drilling holes for vias and through-hole components with 2 of the 3 toolheads. Wire is fed into each of the via holes, cut to length, and pressed to form an electrical connection between the top and bottom layers. An engraving head then mills out any copper where it isn&rsquo;t needed, forming the final board (similarly to chemical PCB etching).</p><h3 id=computer-vision>Computer Vision</h3><center><link href=https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css rel=stylesheet><script src=https://code.jquery.com/jquery-3.2.1.slim.min.js crossorigin=anonymous></script><style>#slide-window-53d63a933a1d427231837a31d3a88442{position:relative;width:48em;height:27em;overflow:hidden;top:0;left:0}#slides-list-53d63a933a1d427231837a31d3a88442{width:48em;height:27em;position:absolute;margin:0;padding:0;-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0);transition:all .66s ease;-webkit-transition:all .66s ease}.slide{list-style:none;position:relative;float:left;margin:0;padding:0;width:48em;height:27em;background:#ccc;text-align:center;line-height:100%;background-size:cover;background-position:50%;color:#fff;-webkit-transform:translate3d(0,0,0);-webkit-transform-style:preserve-3d}.nav{position:relative;z-index:9;top:45%;cursor:pointer;color:#fff;opacity:.7;transition:all .66s ease;-webkit-transition:all .66s ease}.nav:hover{opacity:1}#left-53d63a933a1d427231837a31d3a88442{left:3%;float:left}#right-53d63a933a1d427231837a31d3a88442{right:3%;float:right}</style><div id=slide-window-53d63a933a1d427231837a31d3a88442><ol id=slides-list-53d63a933a1d427231837a31d3a88442><li class=slide style=background-image:url(https://portfolio.ddwhite.space/image/lobster_mill/cv/1%20overlay_wire.png)><h1 style=color:#bbb;background-color:#333;opacity:.7;font-weight:700>Wire Overlay</h1></li><li class=slide style=background-image:url(https://portfolio.ddwhite.space/image/lobster_mill/cv/2%20wire_tip.png)><h1 style=color:#bbb;background-color:#333;opacity:.7;font-weight:700>Wire Curvature Compensation</h1></li><li class=slide style=background-image:url(https://portfolio.ddwhite.space/image/lobster_mill/cv/3%20combo_mask_wire.png)><h1 style=color:#bbb;background-color:#333;opacity:.7;font-weight:700>Image Masks</h1></li></ol><span class="nav fa fa-chevron-left fa-3x" id=left-53d63a933a1d427231837a31d3a88442></span>
<span class="nav fa fa-chevron-right fa-3x" id=right-53d63a933a1d427231837a31d3a88442></span></div><script>sliderJQuery=jQuery.noConflict(),sliderJQuery(function(e){e.global=new Object,e.global.total=0,e(document).ready(function(){var n=e("#slide-window-53d63a933a1d427231837a31d3a88442").width(),s=e("#slides-list-53d63a933a1d427231837a31d3a88442 li").length,i=s*n;e.global.item=0,e.global.total=s,e(".slide").css("width",n+"px"),e("#slides-list-53d63a933a1d427231837a31d3a88442").css("width",i+"px"),e("#left-53d63a933a1d427231837a31d3a88442").click(function(){o(),t("back")}),e("#right-53d63a933a1d427231837a31d3a88442").click(function(){o(),t("forward")})});function t(t){if(t=="back")var s=e.global.item-1;t=="forward"&&(s=e.global.item+1),s==-1?n(e.global.total-1):n(s==e.global.total?0:s)}function n(t){var n=e("#slide-window-53d63a933a1d427231837a31d3a88442").width(),s=n*t;e("#slides-list-53d63a933a1d427231837a31d3a88442").css("transform","translate3d(-"+s+"px,0px,0px)"),e.global.item=t}var s,i=parseInt("5000",10);function o(){i&&(s&&clearInterval(s),s=setInterval(function(){t("forward")},i))}o()})</script></center><p>Computer Vision is used during the wire alignment process to account for any bends or variations in the wire as it is fed, as well as to deal with skew issues that arise from the PCB flipping mechanism. Cameras and LEDs mounted on the wire head provide a view of the clippers, via hole, and wire in one shot. The computer vision algorithm isolates the via hole and wire with seperate masks, tracking the position of the wire tip relative to the via hole. By moving proportionally to the detected displacement, the machine can converge on the hole location to reliably feed wire into the hole.</p><h3 id=firmware>Firmware</h3><p>The machine is controlled using a Raspberry Pi, and two control boards (BTT octopus and arduino RAMPS). The machine uses a modified version of Klipper Firmware to communicate with both control boards to handle sensor input, servo control, ESC control, and stepper motor control. The use of klipper allows the machine to take advantage of a multicore 32 bit arm processor and Linux USB camera drivers for computer vision, while offloading the real time motor and sensor processing to the 16 bit control boards.</p><p>The modified firmware adds support for multiple toolheads as well as each of the custom motions added (wire cutting, pressing, flipping). The firmware uses microstepping on all axes to increase motion resolution, and additionally implements closed-loop position control using encoders on the x-y axis to compensate for the nonlinearities typical when using the microstepping feature on any stepper driver.</p><p>The modified firmware adds conductive probing on each of the 3 toolheads, and uses it to build a heightmap of the raw material before each PCB is milled. The firmware uses this information and bilinear interpolation to compensate for warping in the PCB material during milling, ensuring a constant cutting depth and width. Skew correction and position offsets were added to the firmware as well to compensate for the distance between toolheads, and misalignment in the pcb flipping mechanism.</p><p>The firmware presents a web interface via Octoprint allowing the machine to be controlled with a web browser, and allowing gcode files to be uploaded the same way.</p><h3 id=shortcomings>Shortcomings</h3><p><center><link href=https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css rel=stylesheet><script src=https://code.jquery.com/jquery-3.2.1.slim.min.js crossorigin=anonymous></script><style>#slide-window-cffbae3eca50dfa1d5f1892bb5caff9a{position:relative;width:48em;height:27em;overflow:hidden;top:0;left:0}#slides-list-cffbae3eca50dfa1d5f1892bb5caff9a{width:48em;height:27em;position:absolute;margin:0;padding:0;-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0);transition:all .66s ease;-webkit-transition:all .66s ease}.slide{list-style:none;position:relative;float:left;margin:0;padding:0;width:48em;height:27em;background:#ccc;text-align:center;line-height:100%;background-size:cover;background-position:50%;color:#fff;-webkit-transform:translate3d(0,0,0);-webkit-transform-style:preserve-3d}.nav{position:relative;z-index:9;top:45%;cursor:pointer;color:#fff;opacity:.7;transition:all .66s ease;-webkit-transition:all .66s ease}.nav:hover{opacity:1}#left-cffbae3eca50dfa1d5f1892bb5caff9a{left:3%;float:left}#right-cffbae3eca50dfa1d5f1892bb5caff9a{right:3%;float:right}</style><div id=slide-window-cffbae3eca50dfa1d5f1892bb5caff9a><ol id=slides-list-cffbae3eca50dfa1d5f1892bb5caff9a><li class=slide style=background-image:url(https://portfolio.ddwhite.space/image/lobster_mill/failures/Holes.jpg)><h1 style=color:#bbb;background-color:#333;opacity:.7;font-weight:700>0.5mm Via Hole misalignment</h1></li><li class=slide style=background-image:url(https://portfolio.ddwhite.space/image/lobster_mill/failures/qfp.jpg)><h1 style=color:#bbb;background-color:#333;opacity:.7;font-weight:700>QFP package pads too thin</h1></li></ol><span class="nav fa fa-chevron-left fa-3x" id=left-cffbae3eca50dfa1d5f1892bb5caff9a></span>
<span class="nav fa fa-chevron-right fa-3x" id=right-cffbae3eca50dfa1d5f1892bb5caff9a></span></div><script>sliderJQuery=jQuery.noConflict(),sliderJQuery(function(e){e.global=new Object,e.global.total=0,e(document).ready(function(){var n=e("#slide-window-cffbae3eca50dfa1d5f1892bb5caff9a").width(),s=e("#slides-list-cffbae3eca50dfa1d5f1892bb5caff9a li").length,i=s*n;e.global.item=0,e.global.total=s,e(".slide").css("width",n+"px"),e("#slides-list-cffbae3eca50dfa1d5f1892bb5caff9a").css("width",i+"px"),e("#left-cffbae3eca50dfa1d5f1892bb5caff9a").click(function(){o(),t("back")}),e("#right-cffbae3eca50dfa1d5f1892bb5caff9a").click(function(){o(),t("forward")})});function t(t){if(t=="back")var s=e.global.item-1;t=="forward"&&(s=e.global.item+1),s==-1?n(e.global.total-1):n(s==e.global.total?0:s)}function n(t){var n=e("#slide-window-cffbae3eca50dfa1d5f1892bb5caff9a").width(),s=n*t;e("#slides-list-cffbae3eca50dfa1d5f1892bb5caff9a").css("transform","translate3d(-"+s+"px,0px,0px)"),e.global.item=t}var s,i=parseInt("5000",10);function o(){i&&(s&&clearInterval(s),s=setInterval(function(){t("forward")},i))}o()})</script></center>QFP packages are currently not producable since 2 passes are needed to produce enough trace seperation. With further tunining of cutting depth and speed, only 1 pass should be necessary which would make QFP package milling is achievable. Alignment between toolheads is also not perfect since these distances were calibrated manually, implementation of automatic calibration would make this alignment more reliable.</p><h3 id=project-websitehttpsthelobsterteamgithubio><strong><a href=https://thelobsterteam.github.io>Project Website</a></strong></h3><h3 id=project-githubhttpsgithubcomorgsthelobsterteamrepositories><strong><a href=https://github.com/orgs/TheLobsterTeam/repositories>Project Github</a></strong></h3></div></article></div></div><div class=row><div class="col-sm-8 col-sm-offset-2"><div id=share></div></div></div><div class=clearfix></div><div class=row><div class="col-sm-8 col-sm-offset-2"><div id=comments></div></div></div><div class=clearfix></div></div></main><footer id=footer><div class=container><div class=row><div class="col-md-3 widget"><h3 class=widget-title>Contact</h3><div class=widget-body><p><a href=mailto:david.daniel.white@gmail.com>david.daniel.white@gmail.com</a><br><br></p></div></div><div class="col-md-3 widget"><h3 class=widget-title>Follow me</h3><div class=widget-body><p class=follow-me-icons><a href=https://www.linkedin.com/in/david-d-white/ target=_blank><i class="fab fa-linkedin fa-1x"></i></a>
<a href=https://github.com/David-D-White target=_blank><i class="fab fa-github fa-1x"></i></a></p></div></div></div></div></footer><footer id=underfooter><div class=container><div class=row><div class="col-md-6 widget"><div class=widget-body><p></p></div></div><div class="col-md-6 widget"><div class=widget-body><p class=text-right>Copyright &copy; 2023, David White<br>Design: <a href=http://www.gettemplate.com rel=designer>Initio by GetTemplate</a> -
Powered by: <a href=https://gohugo.io/ rel=poweredby>Hugo</a></p></div></div></div></div></footer><script src=https://code.jquery.com/jquery-1.12.4.min.js></script>
<script src=https://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js></script>
<script src=https://portfolio.ddwhite.space/js/bundle.min.8adc00f11fb328590a42ed3b14d3ec5b116abb98395a8a662d782f2150a7de6cc85eacb26c14724bb0c5130a11be2933c9b4f835cd3a053e90f036e210fbdd5d.js integrity="sha512-itwA8R+zKFkKQu07FNPsWxFqu5g5WopmLXgvIVCn3mzIXqyybBRyS7DFEwoRvikzybT4Nc06BT6Q8DbiEPvdXQ=="></script></body></html></body></html>